<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EconoLearn â€” CUET PG Economics</title>

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React + Babel -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <link rel="icon" type="image/png" href="./favicon-32.png" />
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
  <link rel="manifest" href="./manifest.webmanifest" />

  <!-- ===== THEME INITIALIZER (Light / Dark / Deep / System) ===== -->
  <script>
    (function() {
      const key = 'econ_theme';
      const html = document.documentElement;
      const stored = localStorage.getItem(key) || 'system';

      function apply(mode) {
        html.classList.toggle('deep', mode === 'deep');
        const isDark = mode === 'dark' || mode === 'deep' ||
          (mode === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);
        html.classList.toggle('dark', isDark);
      }
      apply(stored);

      window.__cycleTheme = function() {
        const order = ['dark','deep','light','system'];
        const cur = localStorage.getItem(key) || 'system';
        const next = order[(order.indexOf(cur)+1)%order.length];
        localStorage.setItem(key, next);
        apply(next);
        const btn = document.getElementById('themeBtn');
        if (btn) btn.textContent = next.charAt(0).toUpperCase() + next.slice(1);
      };

      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
        if ((localStorage.getItem(key) || 'system') === 'system') apply('system');
      });
    })();
  </script>

  <!-- ===== DEEP DARK CSS OVERLAY ===== -->
  <style>
    html.dark.deep {
      background-color: #05070d;
    }
    html.dark.deep body {
      background:
        radial-gradient(1200px 800px at 50% -10%, rgba(255,255,255,.05), transparent 55%),
        radial-gradient(800px 600px at 120% -20%, rgba(56,189,248,.06), transparent 50%),
        #0b1220;
      background-attachment: fixed, fixed, fixed;
    }
    html.dark.deep [class*="bg-white/60"],
    html.dark.deep [class*="bg-white/70"],
    html.dark.deep [class*="bg-white/95"] {
      background-color: rgba(2,6,23,.85) !important;
    }
    html.dark.deep [class*="border-white/50"],
    html.dark.deep [class*="border-white/60"] {
      border-color: rgba(255,255,255,.06) !important;
    }
    html.dark.deep .backdrop-blur,
    html.dark.deep [class*="backdrop-blur"] {
      background-color: rgba(2,6,23,.70) !important;
    }
    html.dark.deep .bg-teal-600 {
      filter: brightness(.92);
    }
    html.dark.deep .hover\:bg-white:hover {
      background-color: rgba(255,255,255,.06) !important;
    }
  </style>
</head>

<body class="bg-rose-50 dark:bg-slate-900 text-gray-800 dark:text-gray-100 transition-colors duration-500 min-h-screen">
  <div id="root"></div>

  <!-- Floating theme button (top-right) -->
  <button id="themeBtn" onclick="__cycleTheme()"
    class="fixed top-3 right-4 z-50 text-xs px-3 py-2 rounded-md bg-white/70 dark:bg-slate-800/70 border border-gray-300 dark:border-slate-600 shadow hover:shadow-md backdrop-blur">
    Light
  </button>

  <!-- Main App -->
  <script type="text/babel" src="./main.jsx?v=11"></script>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js?v=11');
      });
    }
  </script>
</body>
</html>