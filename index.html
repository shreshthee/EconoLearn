<!-- FILE: index.html -->
<!doctype html>
<html lang="en" data-mode="light">
<head>
  <meta charset="utf-8" />
  <title>EconoLearn ‚Äì MCQ Practice for CUET PG Economics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#fce7f3" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Manifest + Icons -->
  <link rel="manifest" href="./manifest.webmanifest?v=12" />
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png" />

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: { primary: '#0ea5a4', roseSoft: '#fde7ef' },
          fontFamily: { poppins: ['Poppins', 'ui-sans-serif', 'system-ui'] },
          boxShadow: {
            halo: '0 25px 60px rgba(244, 114, 182, 0.22)',
          },
          keyframes: {
            slide: { '0%': { opacity: '0', transform: 'translateY(6px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
            ripple: { '0%': { transform: 'scale(0)', opacity: '0.6' }, '100%': { transform: 'scale(3)', opacity: '0' } }
          },
          animation: { slide: 'slide .35s ease both', ripple: 'ripple .6s ease-out' }
        }
      }
    }
  </script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- React + Babel (react preset only) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Global helpers + Theme handling -->
  <style>
    :root {
      --page-bg: #ffffff;
      --page-fg: #0f172a;
      --toggle-bg: rgba(255,255,255,.85);
      --toggle-fg: #111827;
    }
    html[data-mode="dark"] {
      --page-bg: #0b1220;      /* dark */
      --page-fg: #e5e7eb;
      --toggle-bg: rgba(17,24,39,.85);
      --toggle-fg: #e5e7eb;
    }
    html[data-mode="deep"] {
      --page-bg: #05070d;      /* deep dark */
      --page-fg: #e6eef7;
      --toggle-bg: rgba(5,7,13,.9);
      --toggle-fg: #e6eef7;
    }

    html, body { height: 100%; }
    body { font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: var(--page-bg); color: var(--page-fg); }

    /* Floating theme toggle (bottom-right) */
    #themeFab {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 50;
      background: var(--toggle-bg);
      color: var(--toggle-fg);
      border: 1px solid rgba(255,255,255,.35);
      border-radius: 9999px;
      padding: 10px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: saturate(140%) blur(10px);
    }
    #themeFab:hover { transform: translateY(-1px); transition: transform .2s ease; }

    /* Rosy inner border wrapper (works in all modes) */
    .cardWrap {
      position: relative;
      border-radius: 1.5rem;
      padding: 1px;
      background: linear-gradient(135deg, rgba(253, 242, 248, 0.9), rgba(255, 255, 255, 0.8), rgba(253, 242, 248, 0.9));
    }
    html[data-mode="dark"] .cardWrap {
      background: linear-gradient(135deg, rgba(244, 114, 182, .18), rgba(255,255,255,.06), rgba(16,185,129,.15));
    }
    html[data-mode="deep"] .cardWrap {
      background: linear-gradient(135deg, rgba(255, 20, 147, .15), rgba(255,255,255,.05), rgba(20, 184, 166, .18));
    }

    /* Glass card body stays the same look you approved */
    .glassCard {
      position: relative;
      overflow: visible;
      border-radius: 1.5rem;
      padding: 1.5rem;
      background: rgba(255,255,255,.60);
      border: 1px solid rgba(255,255,255,.5);
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 40px -10px rgba(239,156,167,.45);
    }
    html[data-mode="dark"] .glassCard {
      background: rgba(17,24,39,.55);
      border-color: rgba(255,255,255,.08);
      box-shadow: 0 10px 40px -16px rgba(0,0,0,.7);
    }
    html[data-mode="deep"] .glassCard {
      background: rgba(8,12,20,.60);
      border-color: rgba(255,255,255,.06);
      box-shadow: 0 12px 48px -18px rgba(0,0,0,.75);
    }

    /* Fix: ensure solid buttons remain visible in light mode */
    .solidBtn-fixed {
      background: #0ea5a4 !important;
      color: white !important;
    }
  </style>
</head>

<body>
  <div id="root" class="min-h-screen"></div>

  <!-- Floating Theme FAB -->
  <button id="themeFab" title="Toggle theme">üå§Ô∏è Light</button>

  <script>
    (function(){
      const KEY = 'econ_theme_v1';
      const el = document.documentElement;
      const fab = document.getElementById('themeFab');

      function label(mode){
        if(mode==='dark') return 'üåô Dark';
        if(mode==='deep') return 'üï∂Ô∏è Deep';
        return 'üå§Ô∏è Light';
      }
      function apply(mode){
        el.setAttribute('data-mode', mode);
        fab.textContent = label(mode);
        localStorage.setItem(KEY, mode);
      }
      // init
      apply(localStorage.getItem(KEY) || 'light');
      // cycle
      fab.addEventListener('click', () => {
        const cur = el.getAttribute('data-mode') || 'light';
        const next = cur === 'light' ? 'dark' : (cur === 'dark' ? 'deep' : 'light');
        apply(next);
      });
    })();
  </script>

  <!-- Service Worker (v12) -->
  <script>
    if ('serviceWorker' in navigator) {
      const params = new URLSearchParams(location.search);
      const disableSW = params.get('nosw') === '1';
      window.addEventListener('load', async () => {
        if (disableSW) return;
        try {
          const reg = await navigator.serviceWorker.register('./service-worker.js?v=12');
          if (reg && reg.update) reg.update();
          let reloaded = false;
          navigator.serviceWorker.addEventListener('controllerchange', () => {
            if (reloaded) return; reloaded = true; location.reload();
          });
        } catch {}
      });
    }
  </script>

  <!-- App -->
  <script type="text/babel" data-presets="react" src="./main.jsx?v=12"></script>
</body>
</html>